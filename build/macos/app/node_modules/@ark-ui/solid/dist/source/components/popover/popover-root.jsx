import { mergeProps } from '@zag-js/solid';
import { createSplitProps } from '../../utils/create-split-props';
import { PresenceProvider, splitPresenceProps, usePresence, } from '../presence';
import { usePopover } from './use-popover';
import { PopoverProvider } from './use-popover-context';
export const PopoverRoot = (props) => {
    const [presenceProps, popoverProps] = splitPresenceProps(props);
    const [usePopoverProps, localProps] = createSplitProps()(popoverProps, [
        'autoFocus',
        'closeOnEscape',
        'closeOnInteractOutside',
        'defaultOpen',
        'id',
        'ids',
        'initialFocusEl',
        'modal',
        'onEscapeKeyDown',
        'onFocusOutside',
        'onInteractOutside',
        'onOpenChange',
        'onPointerDownOutside',
        'open',
        'persistentElements',
        'portalled',
        'positioning',
    ]);
    const api = usePopover(usePopoverProps);
    const apiPresence = usePresence(mergeProps(presenceProps, () => ({ present: api().open })));
    return (<PopoverProvider value={api}>
      <PresenceProvider value={apiPresence}>{localProps.children}</PresenceProvider>
    </PopoverProvider>);
};
