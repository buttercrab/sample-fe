{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import { hideOthers } from \"aria-hidden\"\n\nconst raf = (fn: VoidFunction) => {\n  const frameId = requestAnimationFrame(() => fn())\n  return () => cancelAnimationFrame(frameId)\n}\n\ntype MaybeElement = HTMLElement | null\ntype Targets = Array<MaybeElement>\ntype TargetsOrFn = Targets | (() => Targets)\n\ntype Options = {\n  defer?: boolean\n}\n\nexport function ariaHidden(targetsOrFn: TargetsOrFn, options: Options = {}) {\n  const { defer = true } = options\n  const func = defer ? raf : (v: any) => v()\n  const cleanups: (VoidFunction | undefined)[] = []\n  cleanups.push(\n    func(() => {\n      const targets = typeof targetsOrFn === \"function\" ? targetsOrFn() : targetsOrFn\n      const elements = targets.filter(Boolean) as HTMLElement[]\n      cleanups.push(hideOthers(elements))\n    }),\n  )\n  return () => {\n    cleanups.forEach((fn) => fn?.())\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAA2B;AAE3B,IAAM,MAAM,CAAC,OAAqB;AAChC,QAAM,UAAU,sBAAsB,MAAM,GAAG,CAAC;AAChD,SAAO,MAAM,qBAAqB,OAAO;AAC3C;AAUO,SAAS,WAAW,aAA0B,UAAmB,CAAC,GAAG;AAC1E,QAAM,EAAE,QAAQ,KAAK,IAAI;AACzB,QAAM,OAAO,QAAQ,MAAM,CAAC,MAAW,EAAE;AACzC,QAAM,WAAyC,CAAC;AAChD,WAAS;AAAA,IACP,KAAK,MAAM;AACT,YAAM,UAAU,OAAO,gBAAgB,aAAa,YAAY,IAAI;AACpE,YAAM,WAAW,QAAQ,OAAO,OAAO;AACvC,eAAS,SAAK,+BAAW,QAAQ,CAAC;AAAA,IACpC,CAAC;AAAA,EACH;AACA,SAAO,MAAM;AACX,aAAS,QAAQ,CAAC,OAAO,KAAK,CAAC;AAAA,EACjC;AACF;","names":[]}